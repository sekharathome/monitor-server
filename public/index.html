<!DOCTYPE html>
<html>
<head>
    <title>Device Administrator</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body { font-family: sans-serif; background: #0f0f0f; color: white; margin: 0; }
        
        /* TOP ROW CONTAINER - FIXED & CENTERED */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center; /* Center the content */
            align-items: center;
            background: #1a1a1a;
            padding: 10px 0;
            border-bottom: 2px solid #333;
            z-index: 1000;
        }

        .battery-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* The Battery Box */
        .battery-box {
            padding: 8px 20px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.5rem;
            transition: background 0.5s, color 0.5s;
            min-width: 80px;
            text-align: center;
        }

        /* Online: Dark Green Text on Light Green Box */
        .online { 
            background-color: #90ee90; /* LightGreen */
            color: #006400;            /* DarkGreen */
        }

        /* Offline: Dark Red Text on Light Red Box */
        .offline { 
            background-color: #ffcccb; /* LightRed */
            color: #8b0000;            /* DarkRed */
        }

        /* Charging Bolt - Placed NEXT to the box */
        .charging-icon { 
            color: #f1c40f; 
            font-size: 1.8rem; 
            display: none; 
            text-shadow: 0 0 5px rgba(241, 196, 15, 0.5);
        }
        
        .main-content { padding-top: 80px; text-align: center; color: #444; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="battery-container">
            <div id="bat-box" class="battery-box offline">
                <span id="bat-pct">--</span>%
            </div>
            <span id="charging-bolt" class="charging-icon">âš¡</span>
        </div>
    </div>

    <div class="main-content">
        <h3>System Monitor</h3>
        <p>Battery status is pinned to the top center.</p>
    </div>

    <script>
        const socket = io();
        const batBox = document.getElementById('bat-box');
        const batPct = document.getElementById('bat-pct');
        const bolt = document.getElementById('charging-bolt');

        // Handle Connection Status
        socket.on('device-status', (status) => {
            if(status.online) {
                batBox.className = "battery-box online";
            } else {
                batBox.className = "battery-box offline";
                batPct.innerText = "--";
                bolt.style.display = "none";
            }
        });

        // Handle Battery and Charging Data
       socket.on('ui-battery', (data) => { // Make sure this says 'data'
    console.log("Received:", data); // Add this to debug in Browser Console (F12)
    document.getElementById('bat-pct').innerText = data.percent;
    
    const bolt = document.getElementById('charging-bolt');
    bolt.style.display = data.charging ? "inline" : "none";
});
    </script>
</body>
</html>

