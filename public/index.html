<!DOCTYPE html>
<html>
<head>
    <title>Status Monitor</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #000; color: white; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .monitor-card { background: #111; padding: 40px; border-radius: 15px; border: 1px solid #333; width: 400px; text-align: center; }
        .status-badge { display: inline-block; padding: 10px 20px; border-radius: 30px; font-weight: bold; margin-bottom: 20px; }
        .online { background: #27ae60; box-shadow: 0 0 15px #27ae60; }
        .offline { background: #c0392b; box-shadow: 0 0 15px #c0392b; }
        .battery-level { font-size: 3rem; color: #f1c40f; }
        .label { color: #888; font-size: 0.9rem; margin-top: 5px; }
    </style>
</head>
<body>

    <div class="monitor-card">
        <div id="status-tag" class="status-badge offline">DEVICE OFFLINE</div>
        
        <div class="battery-level"><span id="bat-pct">--</span>%</div>
        <div class="label">Current Battery Life</div>
    </div>

    <script>
        const socket = io();

        socket.on('device-status', (status) => {
            const tag = document.getElementById('status-tag');
            if(status.online) {
                tag.innerText = "DEVICE ONLINE";
                tag.className = "status-badge online";
            } else {
                tag.innerText = "DEVICE OFFLINE";
                tag.className = "status-badge offline";
                document.getElementById('bat-pct').innerText = "--";
            }
        });

        socket.on('ui-battery', (percent) => {
            document.getElementById('bat-pct').innerText = percent;
            // Also ensure tag shows online
            const tag = document.getElementById('status-tag');
            tag.innerText = "DEVICE ONLINE";
            tag.className = "status-badge online";
        });
    </script>
</body>
</html>
